<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Select Test ‚Äì Predictamind</title>
    <meta name="description" content="Choose a test to assess early signs of Alzheimer's disease.">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;600;700&family=DM+Sans:wght@400;500;600;700&display=swap"
        rel="stylesheet">
    <script src="js/cursor-trail.js" defer></script>
    <script src="js/floating-particles.js" defer></script>
    <style>
        *,
        *::before,
        *::after {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary: #222222;
            --text-primary: #000;
            --text-secondary: #555;
            --glass-bg: rgba(255, 255, 255, 0.78);
            --glass-border: rgba(255, 255, 255, 0.6);
        }

        body {
            font-family: 'DM Sans', sans-serif;
            min-height: 100vh;
            background: linear-gradient(135deg, #f8f9ff 0%, #eef1f8 100%);
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 0 1rem 3rem;
            cursor: none;
        }

        /* Navbar */
        .navbar {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 1000;
            padding: 1.2rem 5%;
            background: rgba(255, 255, 255, 0.92);
            backdrop-filter: blur(20px);
            border-bottom: 1px solid rgba(0, 0, 0, 0.05);
        }

        .nav-container {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            font-family: 'Playfair Display', serif;
            font-size: 1.6rem;
            font-weight: 700;
            color: #222;
            text-decoration: none;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .logo-icon {
            width: 38px;
            height: 38px;
            background: linear-gradient(135deg, #222, #444);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 700;
            font-size: 1.1rem;
        }

        .nav-back {
            padding: 0.6rem 1.5rem;
            background: #222;
            color: white;
            border-radius: 50px;
            text-decoration: none;
            font-weight: 600;
            font-size: 0.9rem;
            transition: all 0.3s ease;
        }

        .nav-back:hover {
            background: #444;
            transform: translateY(-2px);
        }

        /* Header */
        .page-header {
            text-align: center;
            margin-top: 6.5rem;
            margin-bottom: 2.5rem;
            padding: 0 1rem;
        }

        .welcome-badge {
            display: inline-block;
            padding: 0.4rem 1.2rem;
            background: rgba(52, 168, 83, 0.1);
            color: #34A853;
            border-radius: 50px;
            font-size: 0.85rem;
            font-weight: 600;
            margin-bottom: 0.8rem;
        }

        .page-header h1 {
            font-family: 'Playfair Display', serif;
            font-size: 2.6rem;
            font-weight: 700;
            color: #111;
            margin-bottom: 0.75rem;
        }

        .gradient-text {
            background: linear-gradient(90deg, #EA4335, #FBBC05, #34A853, #4285F4);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            background-size: 200% auto;
            animation: gradientMove 5s linear infinite;
        }

        @keyframes gradientMove {
            0% {
                background-position: 0% 50%
            }

            100% {
                background-position: 200% 50%
            }
        }

        .page-header p {
            color: #666;
            font-size: 1rem;
            max-width: 480px;
            margin: 0 auto;
        }

        /* Steps */
        .steps {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0;
            margin-bottom: 2.5rem;
            width: 100%;
            max-width: 360px;
        }

        .step {
            display: flex;
            flex-direction: column;
            align-items: center;
            flex: 1;
        }

        .step-dot {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.8rem;
            font-weight: 700;
            background: #e2e8f0;
            color: #94a3b8;
            transition: all 0.3s;
        }

        .step.done .step-dot {
            background: #34A853;
            color: white;
        }

        .step.active .step-dot {
            background: #222;
            color: white;
        }

        .step-label {
            font-size: 0.72rem;
            color: #94a3b8;
            margin-top: 4px;
            font-weight: 500;
        }

        .step.active .step-label,
        .step.done .step-label {
            color: #222;
        }

        .step-line {
            flex: 1;
            height: 2px;
            background: #e2e8f0;
            margin: 0 4px;
            margin-bottom: 20px;
        }

        .step-line.done {
            background: #34A853;
        }

        /* Cards grid */
        .cards-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 1.8rem;
            width: 100%;
            max-width: 920px;
        }

        .test-card {
            background: var(--glass-bg);
            backdrop-filter: blur(14px);
            -webkit-backdrop-filter: blur(14px);
            border: 1.5px solid var(--glass-border);
            border-radius: 24px;
            box-shadow: 0 8px 32px rgba(31, 38, 135, 0.1);
            padding: 2.5rem 2rem;
            text-align: center;
            text-decoration: none;
            color: inherit;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 1rem;
            cursor: pointer;
            transition: transform 0.3s ease, box-shadow 0.3s ease, border-color 0.3s ease;
        }

        .test-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 20px 50px rgba(31, 38, 135, 0.15);
            border-color: rgba(66, 133, 244, 0.3);
        }

        .card-icon {
            width: 80px;
            height: 80px;
            border-radius: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2.5rem;
            background: linear-gradient(135deg, #f0f4ff, #e8f0fe);
            margin-bottom: 0.5rem;
            transition: transform 0.3s ease;
        }

        .test-card:hover .card-icon {
            transform: scale(1.1);
        }

        .card-icon.blink {
            background: linear-gradient(135deg, #fef3c7, #fde68a);
        }

        .card-icon.mri {
            background: linear-gradient(135deg, #dbeafe, #bfdbfe);
        }

        .card-icon.type {
            background: linear-gradient(135deg, #d1fae5, #a7f3d0);
        }

        .card-title {
            font-family: 'Playfair Display', serif;
            font-size: 1.3rem;
            font-weight: 700;
            color: #111;
        }

        .card-desc {
            color: #666;
            font-size: 0.9rem;
            line-height: 1.6;
        }

        .card-badge {
            display: inline-block;
            padding: 0.3rem 0.9rem;
            border-radius: 50px;
            font-size: 0.78rem;
            font-weight: 600;
            margin-top: 0.5rem;
        }

        .card-badge.blink {
            background: rgba(251, 191, 36, 0.15);
            color: #b45309;
        }

        .card-badge.mri {
            background: rgba(66, 133, 244, 0.12);
            color: #1d4ed8;
        }

        .card-badge.type {
            background: rgba(52, 168, 83, 0.12);
            color: #15803d;
        }

        /* Footer note */
        .footer-note {
            margin-top: 2.5rem;
            text-align: center;
            color: #999;
            font-size: 0.82rem;
        }

        /* Done card overlay */
        .test-card.done {
            border-color: rgba(52, 168, 83, 0.5);
            background: rgba(240, 253, 244, 0.9);
        }

        .done-badge {
            display: none;
            position: absolute;
            top: 14px;
            right: 14px;
            background: #34A853;
            color: white;
            font-size: 0.72rem;
            font-weight: 700;
            padding: 0.2rem 0.6rem;
            border-radius: 50px;
        }

        .test-card {
            position: relative;
        }

        .test-card.done .done-badge {
            display: inline-block;
        }

        /* Results CTA bar */
        .results-cta {
            display: none;
            margin-top: 2.5rem;
            background: linear-gradient(135deg, #f0fdf4, #dcfce7);
            border: 1.5px solid #bbf7d0;
            border-radius: 20px;
            padding: 1.5rem 2.5rem;
            text-align: center;
            width: 100%;
            max-width: 920px;
        }

        .results-cta.visible {
            display: block;
        }

        .results-cta p {
            color: #166534;
            font-size: 0.95rem;
            margin-bottom: 1rem;
        }

        .results-cta a {
            display: inline-block;
            padding: 0.85rem 2.5rem;
            background: #222;
            color: white;
            border-radius: 50px;
            text-decoration: none;
            font-weight: 700;
            font-size: 1rem;
            transition: all 0.3s;
        }

        .results-cta a:hover {
            background: #444;
            transform: translateY(-2px);
        }

        /* Card icon image sizing */
        .card-icon svg {
            width: 44px;
            height: 44px;
        }

        @media (max-width: 768px) {
            .cards-grid {
                grid-template-columns: 1fr;
                max-width: 400px;
            }

            .page-header h1 {
                font-size: 2rem;
            }
        }

        @media (min-width: 769px) and (max-width: 1024px) {
            .cards-grid {
                grid-template-columns: 1fr 1fr;
            }
        }
    </style>
</head>

<body>
    <nav class="navbar">
        <div class="nav-container">
            <a href="index.html" class="logo">
                <div class="logo-icon">P</div>
                Predictamind
            </a>
            <div style="display:flex;gap:0.75rem;align-items:center;">
                <a href="patient_history.html" class="nav-back" style="background:#1d4ed8;">üìã My History</a>
                <a href="register.html?reregister=1" class="nav-back">‚Üê Re-register</a>
            </div>
        </div>
    </nav>

    <div class="page-header">
        <span class="welcome-badge" id="welcomeBadge">üëã Welcome, Patient</span>
        <h1>Choose Your <span class="gradient-text">Assessment</span></h1>
        <p>Select one of the three tests below. Your details have been securely saved.</p>
    </div>

    <!-- Progress steps -->
    <div class="steps">
        <div class="step done">
            <div class="step-dot">‚úì</div>
            <span class="step-label">Register</span>
        </div>
        <div class="step-line done"></div>
        <div class="step active">
            <div class="step-dot">2</div>
            <span class="step-label">Select Test</span>
        </div>
        <div class="step-line"></div>
        <div class="step">
            <div class="step-dot">3</div>
            <span class="step-label">Analysis</span>
        </div>
    </div>

    <div class="cards-grid">

        <!-- Blink Detection -->
        <a href="blink_detection.html" class="test-card" id="card-blink">
            <span class="done-badge">Done</span>
            <div class="card-icon blink">
                <!-- Eye SVG -->
                <svg viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <ellipse cx="24" cy="24" rx="20" ry="11" stroke="#b45309" stroke-width="2.5" fill="none" />
                    <circle cx="24" cy="24" r="6.5" fill="#b45309" opacity="0.18" />
                    <circle cx="24" cy="24" r="4" fill="#b45309" />
                    <path d="M24 14 Q28 10 32 14" stroke="#b45309" stroke-width="2" stroke-linecap="round"
                        fill="none" />
                    <path d="M16 14 Q20 10 24 14" stroke="#b45309" stroke-width="2" stroke-linecap="round"
                        fill="none" />
                    <line x1="24" y1="8" x2="24" y2="5" stroke="#b45309" stroke-width="2" stroke-linecap="round" />
                    <line x1="14" y1="11" x2="12" y2="9" stroke="#b45309" stroke-width="2" stroke-linecap="round" />
                    <line x1="34" y1="11" x2="36" y2="9" stroke="#b45309" stroke-width="2" stroke-linecap="round" />
                </svg>
            </div>
            <div class="card-title">Blink Detection</div>
            <p class="card-desc">
                Analyze your blink patterns using your webcam. Takes only 30 seconds and can reveal early neurological
                signs.
            </p>
            <span class="card-badge blink">~30 seconds</span>
        </a>

        <!-- MRI Upload -->
        <a href="upload.html" class="test-card" id="card-mri">
            <span class="done-badge">Done</span>
            <div class="card-icon mri">
                <!-- Brain SVG -->
                <svg viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path
                        d="M24 10 C16 10 10 16 10 22 C10 26 12 29 15 31 C15 35 18 38 22 38 L26 38 C30 38 33 35 33 31 C36 29 38 26 38 22 C38 16 32 10 24 10Z"
                        stroke="#1d4ed8" stroke-width="2.2" fill="rgba(66,133,244,0.1)" />
                    <path d="M24 10 L24 38" stroke="#1d4ed8" stroke-width="1.5" stroke-dasharray="3 2" />
                    <path d="M15 22 C17 20 19 23 21 21 C23 19 25 23 27 21" stroke="#1d4ed8" stroke-width="1.8"
                        stroke-linecap="round" fill="none" />
                    <circle cx="19" cy="27" r="2" fill="#1d4ed8" opacity="0.5" />
                    <circle cx="29" cy="27" r="2" fill="#1d4ed8" opacity="0.5" />
                </svg>
            </div>
            <div class="card-title">MRI Scan Analysis</div>
            <p class="card-desc">
                Upload an existing MRI scan for instant AI-powered analysis and classification of Alzheimer's staging.
            </p>
            <span class="card-badge mri">Upload required</span>
        </a>

        <!-- Typing Speed -->
        <a href="typing_test.html" class="test-card" id="card-typing">
            <span class="done-badge">Done</span>
            <div class="card-icon type">
                <!-- Keyboard SVG -->
                <svg viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <rect x="6" y="16" width="36" height="22" rx="4" stroke="#15803d" stroke-width="2.2"
                        fill="rgba(52,168,83,0.08)" />
                    <rect x="10" y="20" width="4" height="4" rx="1" fill="#15803d" opacity="0.6" />
                    <rect x="16" y="20" width="4" height="4" rx="1" fill="#15803d" opacity="0.6" />
                    <rect x="22" y="20" width="4" height="4" rx="1" fill="#15803d" opacity="0.6" />
                    <rect x="28" y="20" width="4" height="4" rx="1" fill="#15803d" opacity="0.6" />
                    <rect x="34" y="20" width="4" height="4" rx="1" fill="#15803d" opacity="0.6" />
                    <rect x="10" y="27" width="4" height="4" rx="1" fill="#15803d" opacity="0.6" />
                    <rect x="16" y="27" width="16" height="4" rx="1" fill="#15803d" opacity="0.8" />
                    <rect x="34" y="27" width="4" height="4" rx="1" fill="#15803d" opacity="0.6" />
                    <path d="M18 10 L24 6 L30 10" stroke="#15803d" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round" fill="none" />
                    <line x1="24" y1="6" x2="24" y2="14" stroke="#15803d" stroke-width="2" stroke-linecap="round" />
                </svg>
            </div>
            <div class="card-title">Typing Speed Test</div>
            <p class="card-desc">
                Type a short passage to measure fine motor control and cognitive processing speed ‚Äî key Alzheimer's
                indicators.
            </p>
            <span class="card-badge type">~1 minute</span>
        </a>

    </div>

    <!-- Results CTA: shown once at least 1 test done -->
    <div class="results-cta" id="resultsCta">
        <p>Great job! You have completed at least one assessment. You can view your results now or take more tests.</p>
        <a href="results.html">View My Results</a>
    </div>

    <div class="footer-note" id="footerNote">
        Tests are optional. Complete as many as you like ‚Äî all results are linked to your registration.
    </div>

    <script>
        // Guard: must be registered
        const patientId = sessionStorage.getItem('patient_id');
        const patientName = sessionStorage.getItem('patient_name');

        if (!patientId) {
            window.location.href = 'register.html';
        } else {
            const badge = document.getElementById('welcomeBadge');
            badge.textContent = 'Welcome, ' + patientName;
        }

        // Check which tests are done
        const blinkDone = sessionStorage.getItem('blink_done') === '1';
        const mriDone = sessionStorage.getItem('mri_done') === '1';
        const typingDone = sessionStorage.getItem('typing_done') === '1';
        const anyDone = blinkDone || mriDone || typingDone;

        if (blinkDone) document.getElementById('card-blink').classList.add('done');
        if (mriDone) document.getElementById('card-mri').classList.add('done');
        if (typingDone) document.getElementById('card-typing').classList.add('done');

        if (anyDone) {
            document.getElementById('resultsCta').classList.add('visible');
        }
    </script>
</body>

</html>