<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Upload Scan - MindScan AI</title>
    <meta name="description" content="Upload MRI or CT scans for AI-powered Alzheimer's detection analysis.">

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;600;700&family=DM+Sans:wght@400;500;600;700&display=swap"
        rel="stylesheet">
    <script src="js/cursor-trail.js" defer></script>
    <script src="js/floating-particles.js" defer></script>

    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary: #222222;
            --primary-light: #444444;
            --accent: #000000;
            --accent-light: #333333;
            --dark: #000000;
            --dark-blue: #111111;
            --text-primary: #000000;
            --text-secondary: #555555;
            --bg-gradient: linear-gradient(135deg, #ffffff 0%, #f0f0f0 100%);
            --glass-bg: rgba(255, 255, 255, 0.7);
            --glass-border: rgba(255, 255, 255, 0.5);
            --glass-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.15);
        }

        .glass-card {
            background: var(--glass-bg);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border: 1px solid var(--glass-border);
            border-radius: 24px;
            box-shadow: var(--glass-shadow);
        }

        body {
            font-family: Arial, sans-serif;
            line-height: 1.6;
            color: var(--text-primary);
            overflow-x: hidden;
            background: transparent;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        /* Navigation */
        .navbar {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 1000;
            padding: 1.5rem 5%;
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(20px);
            border-bottom: 1px solid rgba(0, 0, 0, 0.05);
            transition: all 0.3s ease;
        }

        .navbar.scrolled {
            padding: 1rem 5%;
            box-shadow: 0 4px 30px rgba(0, 0, 0, 0.05);
        }

        .nav-container {
            max-width: 1400px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            font-family: 'Playfair Display', serif;
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--primary);
            text-decoration: none;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            transition: all 0.3s ease;
        }

        .logo:hover {
            color: var(--primary-light);
        }

        .logo-icon {
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, var(--primary), var(--accent));
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 700;
            font-size: 1.2rem;
        }

        .nav-links {
            display: flex;
            gap: 3rem;
            list-style: none;
        }

        .nav-links a {
            color: var(--text-secondary);
            text-decoration: none;
            font-weight: 500;
            font-size: 0.95rem;
            transition: all 0.3s ease;
            position: relative;
        }

        .nav-links a::after {
            content: '';
            position: absolute;
            bottom: -5px;
            left: 0;
            width: 0;
            height: 2px;
            background: var(--accent);
            transition: width 0.3s ease;
        }

        .nav-links a:hover {
            color: var(--primary);
        }

        .nav-links a:hover::after {
            width: 100%;
        }

        .cta-button {
            padding: 0.75rem 2rem;
            background: linear-gradient(135deg, var(--primary), var(--primary-light), var(--primary));
            background-size: 200% auto;
            color: white;
            border: none;
            border-radius: 50px;
            font-weight: 600;
            cursor: pointer;
            text-decoration: none;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(15, 76, 129, 0.3);
        }

        .cta-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(15, 76, 129, 0.4);
            background-position: right center;
        }

        .cta-button:active {
            transform: scale(0.98) translateY(0);
            box-shadow: 0 5px 15px rgba(15, 76, 129, 0.3);
        }

        /* Upload Section */
        .upload-section {
            padding: 8rem 5% 4rem;
            /* Adjusted top padding for fixed navbar */
            background: transparent;
            position: relative;
            flex: 1;
        }

        .section-header {
            max-width: 800px;
            margin: 0 auto 4rem;
            text-align: center;
        }

        .section-label {
            display: inline-block;
            padding: 0.5rem 1.5rem;
            background: rgba(0, 212, 170, 0.1);
            color: var(--accent);
            border-radius: 50px;
            font-size: 0.9rem;
            font-weight: 600;
            margin-bottom: 1.5rem;
        }

        .section-title {
            font-family: 'Playfair Display', serif;
            font-size: 3rem;
            font-weight: 700;
            color: var(--dark);
            margin-bottom: 1rem;
        }

        .section-description {
            font-size: 1.15rem;
            color: var(--text-secondary);
            line-height: 1.8;
        }

        .upload-container {
            max-width: 900px;
            margin: 0 auto;
            background: white;
            border-radius: 24px;
            padding: 3rem;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.08);
            border: 1px solid rgba(0, 0, 0, 0.05);
        }

        .form-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 2rem;
            margin-bottom: 2rem;
        }

        .form-group {
            display: flex;
            flex-direction: column;
        }

        .form-group.full-width {
            grid-column: 1 / -1;
        }

        .form-label {
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 0.75rem;
            font-size: 0.95rem;
        }

        .form-input,
        .form-select {
            padding: 1rem 1.25rem;
            border: 2px solid #e2e8f0;
            border-radius: 12px;
            font-size: 1rem;
            font-family: 'DM Sans', sans-serif;
            transition: all 0.3s ease;
            background: #f8fafc;
        }

        .form-input:focus,
        .form-select:focus {
            outline: none;
            border-color: var(--primary);
            background: white;
            box-shadow: 0 0 0 4px rgba(15, 76, 129, 0.1);
        }

        .upload-area {
            border: 2px dashed #cbd5e1;
            border-radius: 16px;
            padding: 3rem;
            text-align: center;
            transition: all 0.3s ease;
            cursor: pointer;
            background: #f8fafc;
            position: relative;
        }

        .upload-area:hover {
            border-color: var(--primary);
            background: rgba(15, 76, 129, 0.02);
        }

        .upload-area.dragover {
            border-color: var(--accent);
            background: rgba(0, 212, 170, 0.05);
            transform: scale(1.02);
        }

        .upload-icon {
            font-size: 3rem;
            color: var(--primary);
            margin-bottom: 1rem;
        }

        .upload-text {
            font-size: 1.1rem;
            color: var(--text-primary);
            font-weight: 600;
            margin-bottom: 0.5rem;
        }

        .upload-hint {
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        #scanUpload {
            display: none;
        }

        .file-preview {
            display: none;
            margin-top: 1.5rem;
            padding: 1.5rem;
            background: rgba(0, 212, 170, 0.05);
            border-radius: 12px;
            border: 1px solid rgba(0, 212, 170, 0.2);
        }

        .file-preview.active {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .file-icon {
            width: 50px;
            height: 50px;
            background: var(--accent);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 600;
        }

        .file-info {
            flex: 1;
        }

        .file-name {
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 0.25rem;
        }

        .file-size {
            font-size: 0.85rem;
            color: var(--text-secondary);
        }

        .remove-file {
            width: 35px;
            height: 35px;
            background: rgba(239, 68, 68, 0.1);
            border: none;
            border-radius: 8px;
            color: #ef4444;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1.2rem;
        }

        .remove-file:hover {
            background: #ef4444;
            color: white;
        }

        .submit-btn {
            width: 100%;
            padding: 1.25rem;
            background: linear-gradient(135deg, var(--primary), var(--primary-light), var(--primary));
            background-size: 200% auto;
            color: white;
            border: none;
            border-radius: 12px;
            font-weight: 600;
            font-size: 1.1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(15, 76, 129, 0.3);
            margin-top: 2rem;
        }

        .submit-btn:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(15, 76, 129, 0.4);
            background-position: right center;
        }

        .submit-btn:active {
            transform: scale(0.98) translateY(0);
            box-shadow: 0 5px 15px rgba(15, 76, 129, 0.3);
        }

        .submit-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .submit-btn.processing {
            background: linear-gradient(135deg, #64748b, #94a3b8);
            animation: pulse 2s ease-in-out infinite;
        }

        @keyframes pulse {

            0%,
            100% {
                opacity: 1;
            }

            50% {
                opacity: 0.8;
            }
        }

        /* Footer */
        .footer {
            background: var(--dark);
            color: rgba(255, 255, 255, 0.7);
            padding: 3rem 5%;
            text-align: center;
        }

        .footer-content {
            max-width: 1400px;
            margin: 0 auto;
        }

        .disclaimer {
            max-width: 800px;
            margin: 0 auto 2rem;
            padding: 1.5rem;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 12px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            font-size: 0.9rem;
            line-height: 1.6;
        }

        .copyright {
            font-size: 0.9rem;
            opacity: 0.6;
        }

        @media (max-width: 768px) {
            .nav-links {
                display: none;
            }

            .upload-container {
                padding: 2rem 1.5rem;
            }

            .form-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>

<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="nav-container">
            <a href="index.html" class="logo">
                <div class="logo-icon">M</div>
                MindScan AI
            </a>
            <ul class="nav-links">
                <li><a href="index.html#home">Home</a></li>
                <li><a href="index.html#features">Features</a></li>
                <li><a href="#" style="color: var(--primary);">Analysis</a></li>
            </ul>
            <a href="index.html" class="cta-button">Back to Home</a>
        </div>
    </nav>

    <!-- Upload Section -->
    <section class="upload-section">
        <div class="section-header">
            <span class="section-label">Start Analysis</span>
            <h2 class="section-title">Upload Patient Scan</h2>
            <p class="section-description">
                Submit MRI or CT brain scans for AI-powered analysis. Our system will
                process the images and generate a comprehensive assessment report.
            </p>
        </div>
        <div class="upload-container glass-card">
            <form id="scanForm">
                <div class="form-grid">
                    <div class="form-group">
                        <label class="form-label">Patient Full Name</label>
                        <input type="text" class="form-input" id="patientName" placeholder="Enter patient name"
                            required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Email Address</label>
                        <input type="email" class="form-input" id="patientEmail" placeholder="patient@example.com"
                            required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Contact Number</label>
                        <input type="tel" class="form-input" id="patientPhone" placeholder="+1 (555) 000-0000" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Scan Date</label>
                        <input type="date" class="form-input" id="scanDate" required>
                    </div>
                    <div class="form-group full-width">
                        <label class="form-label">Scan Type</label>
                        <select class="form-select" id="scanType" required>
                            <option value="">Select scan type</option>
                            <option value="MRI">MRI Scan</option>
                            <option value="CT">CT Scan</option>
                            <option value="Both">Both MRI & CT</option>
                        </select>
                    </div>
                </div>

                <div class="form-group full-width">
                    <label class="form-label">Upload Medical Scan</label>
                    <div class="upload-area" id="uploadArea">
                        <div class="upload-icon">üìÅ</div>
                        <div class="upload-text">Click to upload or drag and drop</div>
                        <div class="upload-hint">Supports: JPEG, PNG, DICOM files (Max 50MB)</div>
                        <input type="file" id="scanUpload" accept="image/*,.dcm" multiple>
                    </div>
                    <div class="file-preview" id="filePreview">
                        <div class="file-icon">üìÑ</div>
                        <div class="file-info">
                            <div class="file-name" id="fileName"></div>
                            <div class="file-size" id="fileSize"></div>
                        </div>
                        <button type="button" class="remove-file" id="removeFile">√ó</button>
                    </div>
                </div>

                <button type="submit" class="submit-btn" id="submitBtn">
                    Analyze Scan with AI
                </button>
            </form>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="footer-content">
            <div class="disclaimer">
                <strong>Medical Disclaimer:</strong> MindScan AI is intended for research and
                clinical decision support purposes only. It does not replace professional medical
                diagnosis, treatment, or advice. All results should be reviewed by qualified
                healthcare professionals. This system is designed to assist, not replace,
                clinical judgment.
            </div>
            <div class="copyright">
                ¬© 2024 MindScan AI. All rights reserved. | Advanced Neuroimaging Analysis Platform
            </div>
        </div>
    </footer>

    <script>
        // Navbar scroll effect
        window.addEventListener('scroll', () => {
            const navbar = document.querySelector('.navbar');
            if (window.scrollY > 50) {
                navbar.classList.add('scrolled');
            } else {
                navbar.classList.remove('scrolled');
            }
        });

        // Upload functionality
        const uploadArea = document.getElementById('uploadArea');
        const fileInput = document.getElementById('scanUpload');
        const filePreview = document.getElementById('filePreview');
        const fileName = document.getElementById('fileName');
        const fileSize = document.getElementById('fileSize');
        const removeFileBtn = document.getElementById('removeFile');
        const form = document.getElementById('scanForm');
        const submitBtn = document.getElementById('submitBtn');

        uploadArea.addEventListener('click', () => {
            fileInput.click();
        });

        uploadArea.addEventListener('dragover', (e) => {
            e.preventDefault();
            uploadArea.classList.add('dragover');
        });

        uploadArea.addEventListener('dragleave', () => {
            uploadArea.classList.remove('dragover');
        });

        uploadArea.addEventListener('drop', (e) => {
            e.preventDefault();
            uploadArea.classList.remove('dragover');
            const files = e.dataTransfer.files;
            if (files.length > 0) {
                fileInput.files = files;
                displayFile(files[0]);
            }
        });

        fileInput.addEventListener('change', (e) => {
            if (e.target.files.length > 0) {
                displayFile(e.target.files[0]);
            }
        });

        removeFileBtn.addEventListener('click', () => {
            fileInput.value = '';
            filePreview.classList.remove('active');
        });

        function displayFile(file) {
            fileName.textContent = file.name;
            fileSize.textContent = formatFileSize(file.size);
            filePreview.classList.add('active');
        }

        function formatFileSize(bytes) {
            if (bytes === 0) return '0 Bytes';
            const k = 1024;
            const sizes = ['Bytes', 'KB', 'MB', 'GB'];
            const i = Math.floor(Math.log(bytes) / Math.log(k));
            return Math.round(bytes / Math.pow(k, i) * 100) / 100 + ' ' + sizes[i];
        }

        // Form submission
        form.addEventListener('submit', function (e) {
            e.preventDefault();

            // Validation
            const name = document.getElementById('patientName').value;
            const email = document.getElementById('patientEmail').value;
            const phone = document.getElementById('patientPhone').value;
            const date = document.getElementById('scanDate').value;
            const scanType = document.getElementById('scanType').value;

            if (!name || !email || !phone || !date || !scanType) {
                alert('Please fill in all required fields');
                return;
            }

            if (!fileInput.files || fileInput.files.length === 0) {
                alert('Please upload at least one scan image');
                return;
            }

            // Store data in sessionStorage
            sessionStorage.setItem('patientName', name);
            sessionStorage.setItem('patientEmail', email);
            sessionStorage.setItem('patientPhone', phone);
            sessionStorage.setItem('scanDate', date);
            sessionStorage.setItem('scanType', scanType);

            // Show processing state
            submitBtn.disabled = true;
            submitBtn.classList.add('processing');
            submitBtn.textContent = 'Processing Scan...';

            // Handle file upload
            const file = fileInput.files[0];
            const reader = new FileReader();

            reader.onload = function (e) {
                try {
                    sessionStorage.setItem('scanImage', e.target.result);
                } catch (error) {
                    console.warn('Scan image too large for session storage. Preview may not be available on next page.', error);
                    sessionStorage.removeItem('scanImage'); // Clear if partial save
                }

                // Simulate processing delay
                setTimeout(() => {
                    window.location.href = 'ai_analysis.html';
                }, 1500);
            };

            reader.readAsDataURL(file);
        });

        // Set max date to today for scan date input
        const today = new Date().toISOString().split('T')[0];
        document.getElementById('scanDate').setAttribute('max', today);
    </script>
</body>

</html>